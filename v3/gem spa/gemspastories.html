<!DOCTYPE html>
<html>
  <head>
    <title>Gem Spa Stories</title>
    <link rel="stylesheet" href="gemspastoriesstyles.css" />
    <link rel="stylesheet" href="https://use.typekit.net/why0zpc.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,500;0,600;1,300&family=Inter:wght@100;200;300;600&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap"
      rel="stylesheet"
    />
        <script src="https://cdn.jsdelivr.net/npm/circular-revealer@0.0.8/dist/index.iife.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-parallax-js@5.5.1/dist/simpleParallax.min.js"></script>
    <script src="https://cdn.rawgit.com/bit101/quicksettings/master/quicksettings.js"></script>
  </head>
  <body>
    <header>
      <div id="home">
        <a href="../landing/index.html"><h3 id="go">404:HOME</h3></a>
      </div>

      <div>
        <button class="header__button nav-btn-js" type="button"></button>
        <nav class="header__nav nav-js" data-active="false">
          <ul class="header__menu">
            <h2>INDEX</h2>
            <li class="header__menu-item">
              <a href="../gem spa/gemspa.html"><h2>(01) GEM SPA</h2></a>
              <a href="../lstd/lstd.html"><h2>(02) LOVE SAVES THE DAY</h2></a>
              <a href="../raul/raul.html"><h2>(03) RAUL CANDY STORE</h2></a>
              <a href="../golden gate/goldengate.html">
                <h2>(04) GOLDEN GATE FANCY FRUITS & VEGETABLES</h2>
              </a>
              <a href="../subwayinn/subwayinn.html">
                <h2>(05) SUBWAY INN</h2>
              </a>

              <h3 id="about">
                404: Forget Me Not is a project by Kristina You created as her
                thesis project at NYU's ITP program in 2023. It is a project
                about human stories, New York Cities, the effects of
                gentrification, and preservation of memories. It tells the story
                of five select NYC stores that have served neighborhoods for
                countless years but have or on the verge of disappearing. 404
                was created as an attempt to create a space for the stories that
                were created at these locations to live on forever if only on
                the web.
              </h3>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <div id="top">
        <h1>GEM SPA STORIES</h1>
      </div>
    </div>
    <form>
      <div class="form__group field">
        <label for="textInput" class="form__label">
          <h4>ADD TO THE COLLECTION OF MEMORIES AT GEM SPA</h4>
        </label>
        <input
          type="text"
          class="form__field"
          placeholder="Start Typing Here.."
          name="textInput"
          id="textInput"
          required
          oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'
        />
      </div>

      <button id="submit" type="button" onclick="displayText()">SUBMIT</button>
    </form>
    <div id="output"></div>

    <div id="bottom">
      <a href="gemspa.html"><p id="tell">
        BACK TO GEM SPA</p></a>
      <p id="learn">LEARN MORE</p>
      <a href="../lstd/lstd.html"><p id="next">NEXT</p></a>
    </div>

    <script>
      	var submissions = [];
		var positions = [];

		function displayText() {
			var input = document.getElementById("textInput").value;
			var now = new Date();
			var submission = {
				text: input,
				date: now
			};
			submissions.push(submission);
			displayAllSubmissions();
			document.getElementById("textInput").value = "";
		}

		function displayAllSubmissions() {
			var output = document.getElementById("output");
			output.innerHTML = "";
			for (var i = 0; i < submissions.length; i++) {
				var submission = submissions[i];
				var text = submission.text;
				var date = submission.date;
				var left, top, overlap;
				do {
					left = Math.floor(Math.random() * (window.innerWidth - 200)); // generate random left position
					top = Math.floor(Math.random() * (window.innerHeight - 200)); // generate random top position
					overlap = checkOverlap(left, top);
				} while (overlap); // keep generating new positions until there is no overlap
				var html = "<h3 class='submission' style='left: " + left + "px; top: " + top + "px;'>" + text + "<br>" + date.toLocaleDateString() + "</h3>";
				output.innerHTML += html;
				positions.push({
					left: left,
					top: top
				});
			}
		}

		function checkOverlap(left, top) {
			for (var i = 0; i < positions.length; i++) {
				var position = positions[i];
				if (left >= position.left - 180 && left <= position.left + 180 &&
				    top >= position.top - 80 && top <= position.top + 80) {
					return true; // overlap detected
				}
			}
			return false; // no overlap
		}

          document.addEventListener("DOMContentLoaded", () => {
        const revealerNav = window.revealer({
          revealElementSelector: ".nav-js",
          options: {
            anchorSelector: ".nav-btn-js",
          },
        });

        const actionBtn = document.querySelector(".nav-btn-js");
        actionBtn.addEventListener("click", () => {
          if (!revealerNav.isRevealed()) {
            revealerNav.reveal();
            actionBtn.setAttribute("data-open", true);
          } else {
            revealerNav.hide();
            actionBtn.setAttribute("data-open", false);
          }
        });
      });
    </script>
  </body>
</html>
